@page "/customer/dashboard"
@layout CustomerLayout

<div style="padding: 24px; max-width: 1400px; margin: 0 auto;">
    <!-- Welcome Section -->
    <div style="margin-bottom: 24px;">
        <h1 style="font-size: 24px; font-weight: 700; color: #1f2937; margin-bottom: 4px;">Welcome back, Juan!</h1>
        <p style="font-size: 14px; color: #6b7280;">@DateTime.Now.ToString("MMMM dd, yyyy")</p>
    </div>

    <!-- Account Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 32px;">
        <div style="background: linear-gradient(135deg, #0891b2, #0e7490); border-radius: 16px; padding: 24px; color: white; box-shadow: 0 4px 12px rgba(8,145,178,0.2);">
            <div style="font-size: 12px; opacity: 0.9; margin-bottom: 6px;">FINSYS Savings Account</div>
            <div style="font-size: 14px; font-family: monospace; margin-bottom: 12px; opacity: 0.8;">****  ****  ****  1234</div>
            <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">Available Balance</div>
            <div style="font-size: 28px; font-weight: 700;">‚Ç±25,450.00</div>
        </div>
        <div style="background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <h3 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 16px;">This Month</h3>
            <div style="display: flex; flex-direction: column; gap: 16px;">
                <div>
                    <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">Income</div>
                    <div style="font-size: 20px; font-weight: 700; color: #059669;">+‚Ç±15,000.00</div>
                </div>
                <div>
                    <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px;">Expenses</div>
                    <div style="font-size: 20px; font-weight: 700; color: #dc2626;">-‚Ç±8,750.50</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Grid -->
    <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 24px;">
        <h2 style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 20px;">Quick Actions</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px;">
            <a href="/customer/transfer-money" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #eff6ff, #dbeafe); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1e40af" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #1e40af;">Send Money</div>
                </div>
            </a>
            <a href="/customer/deposit" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#065f46" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <path d="M12 5v14M5 12l7 7 7-7"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #065f46;">Deposit</div>
                </div>
            </a>
            <a href="/customer/withdraw" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #fef2f2, #fee2e2); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#991b1b" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <path d="M12 19V5M5 12l7-7 7 7"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #991b1b;">Withdraw</div>
                </div>
            </a>
            <a href="/customer/bills" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#92400e" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <path d="M3 9h18"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #92400e;">Pay Bills</div>
                </div>
            </a>
            <a href="/customer/loans" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #f5f3ff, #ede9fe); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#5b21b6" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <rect x="2" y="7" width="20" height="14" rx="2"/>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #5b21b6;">Loans</div>
                </div>
            </a>
            <a href="/customer/cards" style="text-decoration: none;">
                <div class="quick-action-card" style="background: linear-gradient(135deg, #faf5ff, #f3e8ff); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7c3aed" stroke-width="2" style="margin: 0 auto 10px; display: block;">
                        <rect x="1" y="4" width="22" height="16" rx="2"/>
                        <path d="M1 10h22"/>
                    </svg>
                    <div style="font-size: 13px; font-weight: 600; color: #7c3aed;">Cards</div>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Transactions -->
    <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="font-size: 16px; font-weight: 600; color: #1f2937;">Recent Transactions</h2>
            <a href="/customer/transactions" style="font-size: 13px; color: #0891b2; text-decoration: none; font-weight: 500;">View All ‚Üí</a>
        </div>
        <div style="display: flex; flex-direction: column; gap: 12px;">
            @foreach (var transaction in recentTransactions)
            {
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 14px; background: #f9fafb; border-radius: 10px; transition: all 0.2s; cursor: pointer;" class="transaction-row">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="width: 40px; height: 40px; background: @(transaction.Amount >= 0 ? "linear-gradient(135deg, #d1fae5, #a7f3d0)" : "linear-gradient(135deg, #fee2e2, #fecaca)"); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="@(transaction.Amount >= 0 ? "#059669" : "#dc2626")" stroke-width="2">
                                @if (transaction.Amount >= 0)
                                {
                                    <path d="M12 5v14M5 12l7 7 7-7"/>
                                }
                                else
                                {
                                    <path d="M12 19V5M5 12l7-7 7 7"/>
                                }
                            </svg>
                        </div>
                        <div>
                            <div style="font-weight: 600; color: #1f2937; font-size: 14px;">@transaction.Title</div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 2px;">@transaction.Date.ToString("MMM dd, yyyy")</div>
                        </div>
                    </div>
                    <div style="font-weight: 700; font-size: 14px; color: @(transaction.Amount >= 0 ? "#059669" : "#dc2626");">
                        @(transaction.Amount >= 0 ? "+" : "")‚Ç±@Math.Abs(transaction.Amount).ToString("N2")
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<style>
    .quick-action-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    
    .transaction-row:hover {
        background: #f3f4f6;
        transform: translateX(4px);
    }
</style>

@code {
    [Inject] public NavigationManager Navigation { get; set; } = default!;

    private void GoToTransfer() => Navigation.NavigateTo("/customer/transfer");
    private void GoToBills() => Navigation.NavigateTo("/customer/bills");

    private List<Transaction> recentTransactions = new();

    protected override void OnInitialized()
    {
        recentTransactions = new List<Transaction>
        {
            new Transaction { Icon = "üí∞", Title = "Received from John Doe", Date = DateTime.Now, Amount = 5000 },
            new Transaction { Icon = "üõí", Title = "Shopping - Grocery Store", Date = DateTime.Now.AddDays(-1), Amount = -1250.50m },
            new Transaction { Icon = "üí°", Title = "Electric Bill Payment", Date = DateTime.Now.AddDays(-2), Amount = -850 },
            new Transaction { Icon = "üì±", Title = "Mobile Load", Date = DateTime.Now.AddDays(-3), Amount = -100 },
            new Transaction { Icon = "üçï", Title = "Food Delivery", Date = DateTime.Now.AddDays(-4), Amount = -450 },
        };
    }

    private class Transaction
    {
        public string Icon { get; set; } = "";
        public string Title { get; set; } = "";
        public DateTime Date { get; set; }
        public decimal Amount { get; set; }
    }
}
