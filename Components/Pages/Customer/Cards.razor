@page "/customer/cards"
@layout CustomerLayout

<div class="section-header">
    <h2 class="section-title">My Cards</h2>
    <button class="btn btn-primary">Apply for Card</button>
</div>

<!-- Cards -->
<div style="display: grid; gap: 20px; margin-bottom: 32px;">
    @foreach (var card in cards)
    {
        <div style="background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%); border-radius: 20px; padding: 28px; color: white; box-shadow: 0 8px 24px rgba(92, 113, 94, 0.15);">
            <div style="display: flex; justify-content: space-between; margin-bottom: 32px;">
                <div>
                    <div style="font-size: 12px; opacity: 0.8; margin-bottom: 4px;">@card.Type</div>
                    <div style="font-size: 20px; font-weight: 700; letter-spacing: 2px; font-family: monospace;">@card.CardNumber</div>
                </div>
                <div style="font-size: 24px;">üí≥</div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: end;">
                <div>
                    <div style="font-size: 11px; opacity: 0.8; margin-bottom: 4px;">CARDHOLDER</div>
                    <div style="font-size: 14px; font-weight: 600;">@card.Holder</div>
                </div>
                <div>
                    <div style="font-size: 11px; opacity: 0.8; margin-bottom: 4px;">EXPIRES</div>
                    <div style="font-size: 14px; font-weight: 600;">@card.Expiry</div>
                </div>
                <div>
                    <div style="font-size: 11px; opacity: 0.8; margin-bottom: 4px;">CVV</div>
                    <div style="font-size: 14px; font-weight: 600;">@card.CVV</div>
                </div>
            </div>
        </div>
    }
</div>

<!-- Card Stats -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
    <div style="background: white; border-radius: 16px; padding: 20px; border: 1px solid var(--border);">
        <div style="font-size: 13px; color: var(--text-light); margin-bottom: 4px;">Credit Limit</div>
        <div style="font-size: 24px; font-weight: 700;">‚Ç±50,000</div>
    </div>
    <div style="background: white; border-radius: 16px; padding: 20px; border: 1px solid var(--border);">
        <div style="font-size: 13px; color: var(--text-light); margin-bottom: 4px;">Available Credit</div>
        <div style="font-size: 24px; font-weight: 700;">‚Ç±42,350</div>
    </div>
    <div style="background: white; border-radius: 16px; padding: 20px; border: 1px solid var(--border);">
        <div style="font-size: 13px; color: var(--text-light); margin-bottom: 4px;">Current Balance</div>
        <div style="font-size: 24px; font-weight: 700;">‚Ç±7,650</div>
    </div>
</div>

<!-- Recent Card Transactions -->
<div class="section-header">
    <h3 style="font-size: 16px; font-weight: 600;">Recent Card Transactions</h3>
</div>

<div class="transaction-list">
    @foreach (var txn in cardTransactions)
    {
        <div class="transaction-item">
            <div class="transaction-icon">@txn.Icon</div>
            <div class="transaction-details">
                <div class="transaction-title">@txn.Merchant</div>
                <div class="transaction-date">@txn.Date.ToString("MMM dd, yyyy")</div>
            </div>
            <div class="transaction-amount negative">
                -‚Ç±@txn.Amount.ToString("N2")
            </div>
        </div>
    }
</div>

@code {
    private List<Card> cards = new();
    private List<CardTransaction> cardTransactions = new();

    protected override void OnInitialized()
    {
        cards = new List<Card>
        {
            new Card 
            { 
                Type = "VISA Credit Card", 
                CardNumber = "**** **** **** 4325", 
                Holder = "CUSTOMER USER",
                Expiry = "12/26",
                CVV = "***"
            },
        };

        cardTransactions = new List<CardTransaction>
        {
            new CardTransaction { Icon = "üõí", Merchant = "Online Shopping - Lazada", Amount = 2300, Date = DateTime.Now },
            new CardTransaction { Icon = "üçï", Merchant = "Pizza Hut - BGC", Amount = 850, Date = DateTime.Now.AddDays(-1) },
            new CardTransaction { Icon = "‚õΩ", Merchant = "Shell Gas Station", Amount = 1200, Date = DateTime.Now.AddDays(-2) },
            new CardTransaction { Icon = "üé¨", Merchant = "Netflix Subscription", Amount = 549, Date = DateTime.Now.AddDays(-5) },
        };
    }

    private class Card
    {
        public string Type { get; set; } = "";
        public string CardNumber { get; set; } = "";
        public string Holder { get; set; } = "";
        public string Expiry { get; set; } = "";
        public string CVV { get; set; } = "";
    }

    private class CardTransaction
    {
        public string Icon { get; set; } = "";
        public string Merchant { get; set; } = "";
        public decimal Amount { get; set; }
        public DateTime Date { get; set; }
    }
}
