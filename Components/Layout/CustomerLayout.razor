@inherits LayoutComponentBase
@inject AuthService AuthService
@inject NavigationManager Navigation

<div class="sidebar-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div style="text-align: center;">
                <img src="images/finsys-logo.png" alt="FINSYS Logo" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);" />
                <div class="sidebar-logo">FINSYS Customer</div>
                <div class="sidebar-subtitle">Banking Portal</div>
            </div>
        </div>

        <div class="sidebar-nav">
            <!-- Main Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">MAIN</div>
                <a href="/customer/dashboard" class="sidebar-item @(IsActive("/customer/dashboard"))">
                    <span>â– </span>
                    <span>Dashboard</span>
                </a>
            </div>

            <!-- Banking Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">BANKING SERVICES</div>
                <a href="/customer/deposit" class="sidebar-item @(IsActive("/customer/deposit"))">
                    <span>ğŸ’°</span>
                    <span>Deposit</span>
                </a>
                <a href="/customer/withdraw" class="sidebar-item @(IsActive("/customer/withdraw"))">
                    <span>ğŸ’¸</span>
                    <span>Withdraw</span>
                </a>
                <a href="/customer/transfer-money" class="sidebar-item @(IsActive("/customer/transfer-money"))">
                    <span>ğŸ”„</span>
                    <span>Transfer</span>
                </a>
                <a href="/customer/transactions" class="sidebar-item @(IsActive("/customer/transactions"))">
                    <span>ğŸ“Š</span>
                    <span>Transaction History</span>
                </a>
                <a href="/customer/bills" class="sidebar-item @(IsActive("/customer/bills"))">
                    <span>ğŸ“„</span>
                    <span>Pay Bills</span>
                </a>
            </div>

            <!-- Services Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">SERVICES</div>
                <a href="/customer/cards" class="sidebar-item @(IsActive("/customer/cards"))">
                    <span>â–ª</span>
                    <span>Cards</span>
                </a>
                <a href="/customer/loans" class="sidebar-item @(IsActive("/customer/loans"))">
                    <span>â—†</span>
                    <span>Loans</span>
                </a>
                <a href="/customer/savings" class="sidebar-item @(IsActive("/customer/savings"))">
                    <span>â—</span>
                    <span>Savings</span>
                </a>
                <a href="/customer/rewards" class="sidebar-item @(IsActive("/customer/rewards"))">
                    <span>â˜…</span>
                    <span>Rewards</span>
                </a>
            </div>

            <!-- Account Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ACCOUNT</div>
                <a href="/customer/profile" class="sidebar-item @(IsActive("/customer/profile"))">
                    <span>â—</span>
                    <span>Profile</span>
                </a>
                <a href="/customer/settings" class="sidebar-item @(IsActive("/customer/settings"))">
                    <span>â—ˆ</span>
                    <span>Settings</span>
                </a>
            </div>
        </div>

        <div class="sidebar-footer">
            <div class="sidebar-user" @onclick="HandleLogout">
                <div class="sidebar-user-avatar">CU</div>
                <div class="sidebar-user-info">
                    <h4>Customer User</h4>
                    <p>Logout</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="sidebar-main">
        <div class="sidebar-topbar">
            <div class="topbar-title">@GetPageTitle()</div>
        </div>
        <div class="sidebar-content">
            @Body
        </div>
    </div>
</div>

@code {
    private string IsActive(string path)
    {
        return Navigation.Uri.Contains(path) ? "active" : "";
    }

    private string GetPageTitle()
    {
        var path = Navigation.Uri;
        if (path.Contains("/dashboard")) return "Dashboard";
        // Removed My Accounts
        if (path.Contains("/deposit")) return "Deposit Money";
        if (path.Contains("/withdraw")) return "Withdraw Money";
        if (path.Contains("/transfer")) return "Transfer Money";
        if (path.Contains("/transactions")) return "Transactions";
        if (path.Contains("/bills")) return "Pay Bills";
        if (path.Contains("/cards")) return "Cards";
        if (path.Contains("/loans")) return "Loans";
        if (path.Contains("/savings")) return "Savings";
        if (path.Contains("/rewards")) return "Rewards";
        if (path.Contains("/profile")) return "Profile";
        if (path.Contains("/settings")) return "Settings";
        return "Customer Portal";
    }

    private void HandleLogout()
    {
        AuthService.Logout();
        Navigation.NavigateTo("/login");
    }
}
